#!/usr/bin/env node

// eslint-disable global-require

const {resolve} = require('path');
let srcDir = resolve(__dirname, '../dist');
const isDebug = process.argv.includes('--debug');

if (isDebug) {
  require('@babel/register')({
    extensions: ['.ts'],
    ...require('../../../babel.config.js'),
  });

  srcDir = resolve(__dirname, '../src');
}

const run = require(resolve(srcDir, 'tools/run')).default;
const task = require(resolve(srcDir, 'tools', process.argv[2])).default;

run(task).catch(err => {
  console.error(err.stack);
  process.exit(1);
});

